<section class="page">
  <!-- En-t√™te -->
  <header class="header">
    <h1>Vos Opportunit√©s personnalis√©es</h1>
    <p>D√©couvrez les offres qui vous correspondent le mieux.</p>
  </header>

  <!-- Barre de recherche + filtres -->
  <div class="filters">
    <div class="search">
      <input
        type="text"
        placeholder="Rechercher par poste, entreprise, comp√©tences‚Ä¶"
        [ngModel]="q()"
        (ngModelChange)="q.set($event)"
      />
      <button class="btn primary">Filtres</button>
    </div>

    <div class="toggles">
      <label class="switch">
        <input type="checkbox" [checked]="onlyHighMatch()" (change)="onlyHighMatch.set($event.target.checked)">
        <span class="slider"></span>
      </label>
      <span class="switch-label">Match ‚â• 70%</span>
    </div>
  </div>

  <!-- S√©lecteurs -->
  <div class="selectors">
    <div class="select">
      <label>Contrat</label>
      <select [ngModel]="fContrat()" (ngModelChange)="fContrat.set($event)">
        <option>Tous</option>
        <option>CDI</option>
        <option>CDD</option>
        <option>Stage</option>
        <option>Freelance</option>
      </select>
    </div>
    <div class="select">
      <label>T√©l√©travail</label>
      <select [ngModel]="fMode()" (ngModelChange)="fMode.set($event)">
        <option>Tous</option>
        <option>Hybride</option>
        <option>T√©l√©travail</option>
        <option>Full Remote</option>
        <option>Pr√©sentiel</option>
      </select>
    </div>
    <div class="select">
      <label>Secteur</label>
      <select [ngModel]="fSecteur()" (ngModelChange)="fSecteur.set($event)">
        <option>Tous</option>
        <option>Tech</option>
        <option>Finance</option>
        <option>Sant√©</option>
        <option>Industriel</option>
      </select>
    </div>
    <div class="range">
      <label>Salaire (‚Ç¨k)</label>
      <div class="range-row">
        <input type="number" placeholder="min" [ngModel]="fSalaireMin()" (ngModelChange)="fSalaireMin.set($event ? +$event : null)">
        <span>‚Äì</span>
        <input type="number" placeholder="max" [ngModel]="fSalaireMax()" (ngModelChange)="fSalaireMax.set($event ? +$event : null)">
        <button class="btn ghost" (click)="resetSalaire()">R√©initialiser</button>
      </div>
    </div>
  </div>

  <!-- Grille + Panneau lat√©ral -->
  <div class="grid">
    <div class="cards">
      <div class="result-meta">
        <strong>{{ filtered().length }}</strong> offre(s)
      </div>

      <article class="card" *ngFor="let job of filtered()">
        <div class="card-header">
          <div class="avatar">{{ job.company.slice(0,2).toUpperCase() }}</div>
          <div class="titles">
            <h3>{{ job.title }}</h3>
            <div class="meta">
              <span>{{ job.city }}</span>
              <span>‚Ä¢</span>
              <span>{{ job.typeContrat }}</span>
              <span>‚Ä¢</span>
              <span>{{ job.mode }}</span>
            </div>
          </div>
          <div class="match" [attr.aria-label]="'Compatibilit√© ' + job.compatibilite + '%'">
            <div class="bar">
              <div class="fill" [style.width.%]="job.compatibilite"></div>
            </div>
            <span class="value">{{ job.compatibilite }}%</span>
          </div>
        </div>

        <div class="card-body">
          <div class="row">
            <div class="block">
              <label>Salaire</label>
              <div class="value">{{ job.salaireMinK }}k ‚Äì {{ job.salaireMaxK }}k ‚Ç¨</div>
            </div>
            <div class="block">
              <label>Comp√©tences</label>
              <div class="skills-grid" aria-label="Comp√©tences">
                <span class="chip" *ngFor="let c of job.competences">{{ c }}</span>
              </div>
            </div>
          </div>
        </div>

        <div class="card-actions">
          <a class="btn primary" [routerLink]="['/opportunite', job.id]">Voir d√©tails</a>
          <button class="btn outline">üí¨</button>
        </div>
      </article>
    </div>

    <aside class="side">
      <div class="panel">
        <h4>Suggestions IA</h4>
        <ul class="suggestions">
          <li>Postes proches de vos comp√©tences cl√©s.</li>
          <li>Boostez votre compatibilit√© en ajoutant TypeScript.</li>
          <li>Formation rapide: GraphQL en 7 jours.</li>
        </ul>
        <button class="btn accent full">Activer les recommandations</button>
      </div>
    </aside>
  </div>

  <!-- CTA bas de page -->
  <div class="cta">
    <h3>Ne laissez pas passer l‚Äôopportunit√© de vos r√™ves üöÄ</h3>
    <p>Activez les alertes pour √™tre notifi√© des nouvelles opportunit√©s qui vous correspondent.</p>
    <label class="switch">
      <input type="checkbox">
      <span class="slider"></span>
    </label>
    <span class="switch-label">Alertes opportunit√©s</span>
  </div>
</section>
